<!DOCTYPE html>
<html>
<head>
    <title>SEEK video manager</title>

    <link href="/static/style.css" rel="stylesheet" type="text/css" />
    <link href="/static/jquery.modal.css" rel="stylesheet" type="text/css" />

    <script src="/static/jquery-1.10.2.min.js" type="text/javascript"></script>
    <script src="/static/jquery.cookie.js" type="text/javascript"></script>
    <script src="/static/jquery.tubeplayer.min.js" type="text/javascript"></script>
    <script src="/static/jquery.modal.min.js" type="text/javascript"></script>
    <script src="/static/knockout-2.3.0.js" type="text/javascript"></script>
</head>
<body>
    <div id="container">
        <!-- HEADER - contains logo and account management -->
        <div id="header">
            <span id="logo"><b>SEEK.</b>CHAPTERHOUSE<b>.</b>IO</span>
            {% if user.id %}
                <span id="greet">HI {{ user.username.upper }}</span>
                <form id="logoutForm" action="/account/log_out" method="post">
                    {% csrf_token %}
                    <input type="submit" id="logout" value="Log Out" />
                </form>
            {% else %}
                <input type="button" id="register" value="Register" data-bind="click: onRegisterClick" />
                <form id="registerModal" action="/account/register" method="post" style="display: none;">
                    {% csrf_token %}
                    <label for="username">Username</label>
                    <input id="username" name="username" type="text"><br/>
                    <label for="email">Email</label>
                    <input id="email" name="email" type="text"><br/>
                    <label for="password">Password</label>
                    <input id="password" name="password" type="password"><br/>
                    <label for="repassword">Re-enter Password</label>
                    <input id="repassword" name="repassword" type="password"><br/>
                    <input type="submit" value="Register">
                </form>
                <input type="button" id="login" value="Log In" data-bind="click: onLoginClick" />
                <form id="loginModal" action="/account/log_in" method="post" style="display: none;">
                    {% csrf_token %}
                    <label for="username">Username</label>
                    <input id="username" name="username" type="text"><br/>
                    <label for="password">Password</label>
                    <input id="password" name="password" type="password"><br/>
                    <input type="submit" value="Log In">
                </form>
            {% endif %}
        </div>

        <!-- VIDEOS - for selecting a video -->
        <div id="videos">
            <input type="button" value="Add a video" data-bind="click: onAddVideoClick">
            <div id="videolist" data-bind="foreach: videos">
                <img data-bind="attr: { src: getThumbnailUrl() }, click: model.loadVideo">
            </div>
            <form id="addVideoModal" style="display:none;">
                <!-- TODO accept and parse youtube urls -->
                <label for="videoID">YouTube VideoID</label>
                <!-- TODO add jquery watermark -->
                <input id="videoID" type="text"
                       data-bind="event: { keypress:  onAddVideoSubmit }" >
            </form>
        </div>

        <!-- CONTENT - the player and timestamps -->
        <div id="content">
            <div id='player'></div>
            <form id='controls'>
                <input type="button" value="< 30">
                <input type="button" value="< 5">
                <input type="button" value=">">
                <input type="button" value="5 >">
                <input type="button" value="30 >">

                <input type="button" value="Add timestamp"
                    data-bind="click: currentVideo().addTimestamp"/>
                <input type="button" value="Delete video"
                    data-bind="click: onDeleteVideoClick"/>
            </form>
            <!-- ko if: currentVideo -->
            <table id="timestamps" data-bind="foreach: currentVideo().timestamps">
                <tr>
                    <td class="time">
                        <input type="button" data-bind="attr: {value: getDisplay()}, click: seekTimestamp" />
                    </td>
                    <td class="name" data-bind="text: name"></td>
                    <td class="delete">
                        <input type="button" data-bind="click: deleteTimestamp" value="X">
                    </td>
                </tr>
            </table>
            <!-- /ko -->
        </div>

        <!-- FOOTER - copyright and technologies -->
        <div id="footer">
            <span id="copy">
                &copy; 2013
                <a href="http://chapterhouse.io">Alex Gallichotte</a>
            </span>
            <span id="tech">
                <a href="https://djangoproject.com/">Django</a>
                <a href="https://knockoutjs.com/">KnockoutJS</a>
                <a href="https://jquery.com/">jQuery</a>
                <a href="http://www.tikku.com/jquery-youtube-tubeplayer-plugin">TubePlayer</a>
                <a href="https://heroku.com/">Heroku</a>
            </span>
        </div>
    </div>
</body>
<script src="/static/api.js" type="text/javascript"></script>
<script src="/static/models.js" type="text/javascript"></script>
<script src="/static/code.js" type="text/javascript"></script>
</html>