<!DOCTYPE html>
<html>
<head>
    <title>Youtube Manager</title>

    <link href="/static/style.css" rel="stylesheet" type="text/css" />
    <link href="/static/jquery.modal.css" rel="stylesheet" type="text/css" />

    <script src="/static/jquery-1.10.2.min.js" type="text/javascript"></script>
    <script src="/static/jquery.cookie.js" type="text/javascript"></script>
    <script src="/static/jquery.tubeplayer.min.js" type="text/javascript"></script>
    <script src="/static/jquery.modal.min.js" type="text/javascript"></script>
    <script src="/static/knockout-2.3.0.js" type="text/javascript"></script>
</head>
<body>
    <div id="container">
        <div id="header">
            <span id="logo">CueTube</span>
            {% if user.id %}
                <span id="greet">Hi {{ user.username }}</span>
                <form id="logoutForm" action="/account/log_out" method="post">
                    {% csrf_token %}
                    <input type="submit" id="logout" value="Log Out" />
                </form>
            {% else %}
                <input type="button" id="login" value="Log In" data-bind="click: onLoginClick" />
                <form id="loginModal" action="/account/log_in" method="post" style="display: none;">
                    {% csrf_token %}
                    <label for="username">Username</label>
                    <input id="username" name="username" type="text"><br/>
                    <label for="password">Password</label>
                    <input id="password" name="password" type="password"><br/>
                    <input type="submit" value="Log In">
                </form>
            {% endif %}
        </div>
        <div id="videos">
            <input type="button" value="Add a video" data-bind="click: onAddVideoClick">
            <div id="videolist" data-bind="foreach: videos">
                <img data-bind="attr: { src: getThumbnailUrl() }, click: loadVideo">
            </div>
            <form id="addVideoModal" style="display:none;">
                <!-- TODO accept and parse youtube urls -->
                <label for="videoID">YouTube VideoID</label>
                <!-- TODO add jquery watermark -->
                <input id="videoID" type="text"
                       data-bind="event: { keypress:  onAddVideoSubmit }" >
            </form>
        </div>
        <div id="content">
            <div id='player'></div>
            <form id='controls'>
                <input type="button" value="Add timestamp"
                    data-bind="click: onAddTimestamp"/>
                <input type="button" value="Delete video"
                    data-bind="click: onDeleteVideoClick"/>
            </form>
            <!-- ko if: currentVideo -->
            <table id="timestamps" data-bind="foreach: currentVideo().timestamps">
                <tr>
                    <td class="time" data-bind="text: getDisplay()"></td>
                    <td class="name" data-bind="text: name"></td>
                    <td class="delete" data-bind="click: deleteTimestamp">X</td>
                </tr>
            </table>
            <!-- /ko -->
        </div>
        <div id="footer">
            <span id="footerCopy">&copy; 2013 Alex Gallichotte</span>
            <span id="footerTech">
                <a href="https://djangoproject.com/">Django</a>
                <a href="https://knockoutjs.com/">KnockoutJS</a>
                <a href="https://jquery.com/">jQuery</a>
                <a href="http://www.tikku.com/jquery-youtube-tubeplayer-plugin">TubePlayer</a>
            </span>
        </div>
    </div>
</body>
<script src="/static/api.js" type="text/javascript"></script>
<script src="/static/code.js" type="text/javascript"></script>
</html>